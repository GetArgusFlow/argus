#--------------------------------------------------------------------------
# Matcher Service Environment Variables
#--------------------------------------------------------------------------
# Copy this file to .env and fill in your specific values.
# These variables override the settings in config/config.yml.

# Service Configuration
# You can override the log level (e.g., "debug", "info", "warning")
# SERVICE__LOG_LEVEL="info"
# You can override the environment to production or development.
#SERVICE__ENVIRONMENT="development"

#--------------------------------------------------------------------------
# AUTHENTICATION
#--------------------------------------------------------------------------
# This is the secret API key used to protect sensitive endpoints
# (e.g., /update/product, /admin/train).
# You MUST set this to a strong, random key in production.
# The default "default_dev_key" will work for local testing.
#AUTH__API_KEY="default_dev_key"

#--------------------------------------------------------------------------
# DATABASE CREDENTIALS
#--------------------------------------------------------------------------
# IMPORTANT: Replace these placeholders with your actual database connection details.
#DATABASE__HOST="db-demo"
#DATABASE__USER="root"
#DATABASE__PASSWORD="demopassword"
#DATABASE__NAME="demo_matcher_db"
#DATABASE__PORT="3306"

# Matcher Configuration
# You can override the device for the model if needed (e.g., "cuda", "mps")
#MATCHER__DEVICE="cpu"

#--------------------------------------------------------------------------
# Database Queries
# IMPORTANT: Replace the placeholder SQL queries below with valid SQL for YOUR database.
#
# Instructions:
# 1. Write a query that fetches the required data from your tables.
# 2. Use 'AS' to rename your columns to the standard names expected by the Matcher engine.
# 3. Ensure runtime queries (product_by_id_query) include the ':ids' placeholder.
#
# Expected Standard Column Names (use 'AS' to map to these):
# - id: The unique product ID (required)
# - store_id: The store identifier (REQUIRED for filtering by allowed_store_ids)
# - title: The product title (recommended)
# - brand: The brand (optional)
# - contents: The net contents value, e.g., "750" (optional)
# - unit: The unit, e.g., "ml" (optional)
# - pack: Pack information, e.g., "6-pack" (optional)
# - colors: Colors, e.g., "red" (optional)
# - type: Product type, e.g., "Wine" (optional)
# - ean: EAN codes, use "|" as a separator for multiples if applicable (optional)
# - dimensions: Dimensions string, e.g., "10x20x30" (optional)
#--------------------------------------------------------------------------

# Query for the training pipeline. MUST return columns aliased as 'group_id' and 'product_id'.
#DATABASE_QUERIES__TRAINING_PAIRS_QUERY="SELECT group_id, product_id FROM product_matches"

# Query for the indexing pipeline. MUST return 'id' and other expected columns (title, brand, etc. - see list above).
#DATABASE_QUERIES__INDEXING_QUERY="SELECT product_id AS id, store_id, title, brand, contents, unit, pack, colors, type, ean, dimensions FROM products"

# Query for fetching product data at runtime. MUST return 'id', 'store_id', and other expected columns. MUST include ':ids'.
#DATABASE_QUERIES__PRODUCT_BY_ID_QUERY="SELECT product_id AS id, store_id, title, brand, contents, unit, pack, colors, type, ean, dimensions FROM products WHERE product_id IN :ids"